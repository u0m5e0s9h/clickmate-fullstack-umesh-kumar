(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1257)}])},1257:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(5893),n=r(7294),l=r(7642);let o=(0,l.io)("http://localhost:3001");var a=e=>{let{username:t}=e,[r,l]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{l(t=>[...t,e])};return o.on("chat-message",e),()=>{o.off("chat-message",e)}},[]),(0,n.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]);let u=()=>{if(""===a.trim())return;let e=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r={id:Date.now().toString(),user:t||"Customer",text:a.trim(),timestamp:e};o.emit("chat-message",r),i("")};return(0,s.jsxs)("div",{className:"flex flex-col h-full border rounded p-4 bg-white shadow",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 max-h-64",children:[r.map(e=>(0,s.jsx)("div",{className:"mb-2 ".concat(e.user===t?"text-right":"text-left"),children:(0,s.jsxs)("div",{className:"inline-block px-4 py-2 rounded-lg ".concat(e.user===t?"bg-blue-500 text-white":"bg-gray-200 text-black"),children:[(0,s.jsx)("div",{className:"font-semibold",children:e.user}),(0,s.jsx)("div",{children:e.text}),(0,s.jsx)("div",{className:"text-xs text-gray-300 mt-1",children:e.timestamp})]})},e.id)),(0,s.jsx)("div",{ref:c})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"text",className:"flex-grow border rounded px-3 py-2 mr-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type your message...",value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u()}}),(0,s.jsx)("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Send"})]})]})},i=()=>{let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),c=async()=>{try{let e=await fetch("http://localhost:3001/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:Math.floor(1e3*Math.random()),buyer:r,quantity:1})});e.ok?t("Order placed successfully!"):t("Failed to place order.")}catch(e){t("Error placing order.")}setTimeout(()=>{t(null)},3e3)};return o?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Live Shopping Room"}),(0,s.jsxs)("div",{className:"w-full max-w-2xl flex flex-col space-y-4",children:[(0,s.jsx)(a,{username:r}),(0,s.jsx)("button",{onClick:c,className:"bg-green-600 text-white py-3 rounded hover:bg-green-700 transition",children:"Place Order"}),e&&(0,s.jsx)("div",{className:"mt-2 text-center text-green-700 font-semibold",children:e})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Enter your name to join"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Your name",className:"px-4 py-2 border border-gray-300 rounded mb-4"}),(0,s.jsx)("button",{onClick:()=>r.trim()&&i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Join Room"})]})}}},function(e){e.O(0,[774,642,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);